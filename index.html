<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EMA App</title>
  <link rel="stylesheet" href="https://js.arcgis.com/4.29/esri/themes/light/main.css"/>
  <script src="https://js.arcgis.com/4.29/"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.16.0/dist/tf.min.js"></script>
  <style>
    html, body, #viewDiv {
      padding: 0;
      margin: 0;
      height: 100%;
      width: 100%;
    }
    #status {
      position: absolute;
      top: 10px;
      left: 10px;
      background: white;
      padding: 8px 12px;
      border-radius: 6px;
      font-family: Arial, sans-serif;
      box-shadow: 0px 2px 6px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>
  <div id="viewDiv"></div>
  <div id="status">Loading model...</div>
  <script>
    require(["esri/Map","esri/views/MapView"],function(Map,MapView){
      const map=new Map({basemap:"satellite"});
      const view=new MapView({container:"viewDiv",map:map,center:[80.7718,7.8731],zoom:6});
    });
    async function loadModel(){
      try{
        const model=await tf.loadGraphModel("./tfjs_model/model.json");
        document.getElementById("status").innerText="✅ Model loaded successfully!";
        const input=tf.zeros([1,224,224,3]);
        const prediction=model.predict(input);
        prediction.print();
      }catch(err){
        document.getElementById("status").innerText="❌ Failed to load model!";
        console.error(err);
      }
    }
    window.addEventListener("load",loadModel);
  </script>
</body>
</html>
